## Potential Issues and Recommendations

### A. Exception Class

**Empty Constructor:**  
The `SimpleRegexException` class defines an empty `__construct()` at the end, which overrides the parent `\RuntimeException` constructor.  
**Issue:** This disables all parent constructor logic, which could break exception instantiation.  
**Recommendation:**  
Remove the empty `__construct()` or ensure it properly calls the parent constructor.

### B. Pattern Handling & Regex Generation

**Pattern Aliases:**  
The alias replacement logic in the constructor only replaces the first word if it starts with `@`.  
**Limitation:** If the alias appears elsewhere in the pattern, it will not be replaced.  
**Recommendation:**  
Consider supporting aliases anywhere in the pattern, or clarify this is intentional.

**Exclusion Character:**  
The constructor uses `preg_quote($exclusionChar, '/')` but then also quotes it again in `toRegex` and other places.  
**Risk:** Double-quoting may cause incorrect regex behavior.  
**Recommendation:**  
Only quote once, and ensure consistency.

**Force Match All Logic:**  
In `wrapWithDelimiters`, the placement of the `^` anchor is after the regex body, i.e., `'/pattern^/'`.  
**Bug:** The `^` anchor should be at the start of the pattern, not after.  
**Recommendation:**  
Change to:  
```php
return '/' . ($this->forceMatchAll ? '^' : '') . $regex . '/';
```

### C. Caching

**Static vs Instance Cache:**  
The pattern cache is static, but some instance methods (e.g., `clearCache`) reference `$this->patternCache`.  
**Bug:** This creates a separate property on the instance, not affecting the static cache.  
**Recommendation:**  
Always use `self::$patternCache` for static properties.

**Cache Shrinking Logic:**  
In `clearCache`, the shrinking logic uses `\array_slice` on `$this->patternCache`, which may not work as expected for associative arrays.  
**Recommendation:**  
Use `array_keys` and `array_diff_key` to remove the oldest entries reliably.

### D. Regex Processing

**Wildcard and Question Mark Handling:**  
The logic for wildcards and question marks is complex and may have edge cases.  
The comment suggests that `?` matches zero or more characters, which is not standard.  
The replacement for `?` is ` '[^' . $exclusionChar . ']*?'`, which matches zero or more, not a single character.  
**Recommendation:**  
Clarify the intended semantics and ensure the implementation matches expectations.

**Restoring Tokens:**  
The `restoreTokens` method replaces placeholders with original bracketed content.  
**Risk:** If the same token string appears in the pattern, it could be replaced incorrectly.  
**Recommendation:**  
Ensure token placeholders are unique and do not collide with user input.

### E. Error Handling

**Error Handler Restoration:**  
In `isValid`, the error handler is restored in both the try and catch blocks.  
**Risk:** If an exception is thrown before `restore_error_handler()` is called, the handler may not be restored.  
**Recommendation:**  
Use a finally block to guarantee restoration.

### F. Minor Issues & Suggestions

**PHP 8+ Features:**  
The constructor uses `private bool $forceMatchAll = false` as a promoted property but also lists it as a parameter.  
**Redundancy:** This is valid in PHP 8+, but check for consistency with other properties.

**Regex Delimiters:**  
The code uses `/` as the regex delimiter. If the pattern contains unescaped `/`, this could cause issues.  
**Recommendation:**  
Escape delimiters or allow specifying a custom delimiter.